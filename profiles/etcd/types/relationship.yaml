tosca_definitions_version: tosca_simple_yaml_1_3

relationship_types:

  etcd.relationships.ConnectsToEtcdCluster:
    derived_from: tosca.relationships.ConnectsTo
    interfaces:
      Configure:
        operations:
          pre_configure_source:
            inputs:
              peer_address:
                value: { get_property: [ TARGET, peer_address, port ] }
                type: string
              peer_addresses:
                value: { get_attribute: [ SOURCE, peer_addresses ] }
                type: list
            outputs:
              peer_addresses: [ SOURCE, peer_addresses ]
              access_addresses: [ SOURCE, access_addresses ]
            implementation: ../ansible/etcd-peer--pre-configure-source.yaml
